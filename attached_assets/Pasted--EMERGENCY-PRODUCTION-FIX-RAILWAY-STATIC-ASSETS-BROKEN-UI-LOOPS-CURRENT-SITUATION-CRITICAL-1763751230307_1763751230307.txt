# EMERGENCY PRODUCTION FIX: RAILWAY STATIC ASSETS & BROKEN UI LOOPS

**CURRENT SITUATION: CRITICAL FAILURE ON RAILWAY**
We are facing a deadline, and the Railway deployment is fundamentally broken compared to the local Replit environment. The application is unusable due to missing assets and broken core ordering flows.

**ROOT CAUSE HYPOTHESIS:**
1.  **Static File Serving Misconfiguration:** The Express server on Railway is not correctly configured to serve files from the `public` directory in the production environment.
2.  **Database Path Corruption:** The image paths stored in the PostgreSQL database (seeded data) do not match the actual physical location of the files after recent moves. They are likely missing the leading `/` or pointing to wrong directories.
3.  **Variant Logic Failure:** The Frontend `MenuItemDialog` is failing to detect or render base variants for standard bowls, making them unorderable.

**YOUR MISSION: EXECUTE THESE 3 FIXES IMMEDIATELY**

---

### FIX 1: MASTER STATIC ASSET CONFIGURATION (Server-Side)
**Objective:** Ensure Railway can actually serve the files located in the `public` folder.

1.  **Audit `server/index.ts` (or `app.ts`):**
    * Verify that `express.static` is correctly configured to serve the `public` folder.
    * **CRITICAL FOR RAILWAY:** Ensure you are using an absolute path resolvable in the build environment, e.g., `path.join(process.cwd(), 'public')` or similar, not just a relative string like `'./public'`.
    * Ensure the route mount point is correct (e.g., `app.use('/images', express.static(...))`) so URLs like `/images/drinks/cola.png` resolve correctly.

---

### FIX 2: DATABASE IMAGE PATH INTEGRITY RE-SEED (Data-Side)
**Objective:** Force the database to contain the EXACT absolute web paths to the images where they currently reside.

1.  **Locate Physical Assets:** Confirm the exact current location of:
    * Slider Images: You stated they are in `public/images/pages/Startseite/` (e.g., `slider-1.jpg`).
    * Drink/Ingredient Images: Confirm their new location wherever you moved them.
2.  **Rewrite `server/seed.ts` (or data source files):** Update the seed data to use hardcoded, correct **ABSOLUTE WEB PATHS** for Railway.
    * **Slider Fix:** The seed MUST insert entries into the gallery table with paths like: `/images/pages/Startseite/slider-1.jpg`, `/images/pages/Startseite/slider-2.jpg`, etc.
    * **Drinks/Ingredients Fix:** Update every drink and ingredient entry in the seed data to have the correct path, starting with a slash (e.g., `/images/categories/drinks/cola.png`, NOT just `cola.png`).
3.  **Outcome:** When the DB re-seeds, the `image` columns must contain playable URLs relative to the domain root.

---

### FIX 3: RESTORE STANDARD BOWL VARIANTS UI (Frontend-Side)
**Objective:** The base selector dropdown is missing on standard bowls (Image 6 in user reference), preventing orders.

1.  **Audit Frontend Logic (`MenuItemDialog.tsx`):**
    * Examine the condition that renders the Base Selection dropdown/radios. It likely checks something like `if (dish.enableBaseSelection) ...`.
2.  **Verify Data Flow:** Ensure the API response for menu items actually includes this boolean flag and the associated variant options.
3.  **Verify Seed Data:** Ensure the consolidated standard bowls in `server/seed.ts` genuinely have `enableBaseSelection: true` set.
4.  **Action:** Fix the frontend conditional rendering OR fix the backend data payload so the selectors reappear immediately.

---

**EXECUTION PROTOCOL:**
1.  Apply code fixes for Static Serving, Seed Data paths, and Variant logic.
2.  **MANDATORY:** Instruct me to WIPE the Railway Database volume and REDEPLOY so the new, correct seed data overwrites the broken paths.

**GO. FIX IT NOW.**
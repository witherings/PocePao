2025-11-21T01:36:09.000000000Z [inf]  Starting Container
2025-11-21T01:36:10.240983440Z [inf]  ðŸš‚ Railway environment detected, waiting for private network initialization...
2025-11-21T01:36:10.241030514Z [err]  npm warn config production Use `--omit=dev` instead.
2025-11-21T01:36:10.241036017Z [inf]  
2025-11-21T01:36:10.241040657Z [inf]  > rest-express@1.0.0 railway:start
2025-11-21T01:36:10.241045111Z [inf]  > npm run db:migrate; npm run db:seed; npm run db:create-admin || true; npm run start
2025-11-21T01:36:10.241049323Z [inf]  
2025-11-21T01:36:10.241053816Z [err]  npm warn config production Use `--omit=dev` instead.
2025-11-21T01:36:10.241058522Z [inf]  
2025-11-21T01:36:10.241063286Z [inf]  > rest-express@1.0.0 db:migrate
2025-11-21T01:36:10.241067590Z [inf]  > tsx server/migrate.ts
2025-11-21T01:36:10.241071924Z [inf]  
2025-11-21T01:36:10.241077272Z [inf]  ðŸ”„ Running database migrations...
2025-11-21T01:36:10.241082540Z [inf]  
2025-11-21T01:36:13.371620156Z [inf]  ðŸ“ Ensuring app_settings table exists...
2025-11-21T01:36:13.371629339Z [inf]    âœ“ app_settings table exists
2025-11-21T01:36:13.371631873Z [inf]  ðŸ”Œ Attempting database connection to: postgresql://postgres:****@switchback.proxy.rlwy.net:44317/railway
2025-11-21T01:36:13.371638310Z [inf]  ðŸ”„ Connection attempt 1/5...
2025-11-21T01:36:13.371639723Z [inf]  
2025-11-21T01:36:13.371647183Z [inf]  ðŸ” Verifying schema...
2025-11-21T01:36:13.371653476Z [inf]    âœ“ menu_items.price_small
2025-11-21T01:36:13.371671216Z [inf]  âœ… Database connection successful!
2025-11-21T01:36:13.371678906Z [inf]  ðŸ“ Migrating menu_items table...
2025-11-21T01:36:13.371686175Z [inf]    âœ“ price_small exists
2025-11-21T01:36:13.371692870Z [inf]    âœ“ enable_base_selection exists
2025-11-21T01:36:13.371703137Z [inf]    âž• Adding has_variants: Has variants (base/flavor selection)
2025-11-21T01:36:13.371710178Z [inf]       âœ“ Successfully added has_variants
2025-11-21T01:36:13.371718272Z [inf]    âž• Adding variant_type: Type of variant: base or flavor
2025-11-21T01:36:13.371724638Z [inf]       âœ“ Successfully added variant_type
2025-11-21T01:36:13.371734266Z [inf]    âž• Adding requires_variant_selection: Must select variant before adding to cart
2025-11-21T01:36:13.371741663Z [inf]       âœ“ Successfully added requires_variant_selection
2025-11-21T01:36:13.371747989Z [inf]  
2025-11-21T01:36:13.371754137Z [inf]  ðŸ“ Migrating ingredients table...
2025-11-21T01:36:13.371760339Z [inf]    âœ“ price_small exists
2025-11-21T01:36:13.371766554Z [inf]    âœ“ price_standard exists
2025-11-21T01:36:13.371775488Z [inf]  
2025-11-21T01:36:13.371782343Z [inf]  ðŸ“ Ensuring product_variants table exists...
2025-11-21T01:36:13.371787920Z [inf]    âž• Creating product_variants table
2025-11-21T01:36:13.371793779Z [inf]       âœ“ Successfully created product_variants table
2025-11-21T01:36:13.371800467Z [inf]  
2025-11-21T01:36:13.376824471Z [inf]    âœ“ ingredients.price_standard
2025-11-21T01:36:13.376839185Z [inf]  
2025-11-21T01:36:13.376846337Z [inf]  âœ… All migrations completed successfully!
2025-11-21T01:36:13.376852145Z [inf]  âœ… Schema verification passed!
2025-11-21T01:36:13.376868082Z [inf]    âœ“ menu_items.enable_base_selection
2025-11-21T01:36:13.376874799Z [inf]    âœ“ menu_items.has_variants
2025-11-21T01:36:13.376880346Z [inf]    âœ“ menu_items.variant_type
2025-11-21T01:36:13.376885532Z [inf]    âœ“ menu_items.requires_variant_selection
2025-11-21T01:36:13.376892321Z [inf]    âœ“ ingredients.price_small
2025-11-21T01:36:13.488090855Z [err]  npm warn config production Use `--omit=dev` instead.
2025-11-21T01:36:13.527892852Z [inf]  
2025-11-21T01:36:13.527899740Z [inf]  > rest-express@1.0.0 db:seed
2025-11-21T01:36:13.527908709Z [inf]  > tsx server/seed.ts
2025-11-21T01:36:13.527915449Z [inf]  
2025-11-21T01:36:14.450339206Z [inf]  ðŸŒ± Starting database seeding...
2025-11-21T01:36:14.450343366Z [inf]  
2025-11-21T01:36:14.450348496Z [inf]  ðŸš‚ Railway environment detected, waiting for private network initialization...
2025-11-21T01:36:17.336256335Z [inf]  ðŸ”Œ Attempting database connection to: postgresql://postgres:****@switchback.proxy.rlwy.net:44317/railway
2025-11-21T01:36:17.336267627Z [inf]  ðŸ”„ Connection attempt 1/5...
2025-11-21T01:36:17.336273698Z [inf]  âœ… Database connection successful!
2025-11-21T01:36:17.336289259Z [inf]  âš ï¸  Database already has data. Skipping seed to preserve existing data.
2025-11-21T01:36:17.336313596Z [inf]     Found 6 categories.
2025-11-21T01:36:17.420025790Z [err]  npm warn config production Use `--omit=dev` instead.
2025-11-21T01:36:17.458288514Z [inf]  
2025-11-21T01:36:17.458293921Z [inf]  > rest-express@1.0.0 db:create-admin
2025-11-21T01:36:17.458299236Z [inf]  > tsx server/create-admin.ts
2025-11-21T01:36:17.458304823Z [inf]  
2025-11-21T01:36:18.461079683Z [inf]  ðŸš‚ Railway environment detected, waiting for private network initialization...
2025-11-21T01:36:18.461217997Z [inf]  ðŸ” Creating admin user...
2025-11-21T01:36:18.461224888Z [inf]  
2025-11-21T01:36:21.264964784Z [inf]  ðŸ”Œ Attempting database connection to: postgresql://postgres:****@switchback.proxy.rlwy.net:44317/railway
2025-11-21T01:36:21.264965033Z [inf]  ðŸ”„ Connection attempt 1/5...
2025-11-21T01:36:21.264971898Z [inf]  âœ… Database connection successful!
2025-11-21T01:36:21.264977918Z [inf]  âš ï¸  Admin user already exists. Skipping admin creation.
2025-11-21T01:36:21.264983803Z [inf]     Username: admin
2025-11-21T01:36:21.383164530Z [err]  npm warn config production Use `--omit=dev` instead.
2025-11-21T01:36:21.418706017Z [inf]  
2025-11-21T01:36:21.418718952Z [inf]  > rest-express@1.0.0 start
2025-11-21T01:36:21.418727844Z [inf]  > NODE_ENV=production tsx server/index.ts
2025-11-21T01:36:21.418735483Z [inf]  
2025-11-21T01:36:23.530133217Z [inf]  ðŸš‚ Railway environment detected, waiting for private network initialization...
2025-11-21T01:36:26.329659357Z [inf]  ðŸ”Œ Attempting database connection to: postgresql://postgres:****@switchback.proxy.rlwy.net:44317/railway
2025-11-21T01:36:26.329665432Z [inf]  ðŸ”„ Connection attempt 1/5...
2025-11-21T01:36:26.329671806Z [inf]  âœ… Database connection successful!
2025-11-21T01:36:26.329677761Z [inf]  âœ… Admin user already exists
2025-11-21T01:36:26.329683781Z [inf]  1:36:26 AM [express] serving on port 8080
2025-11-21T01:36:27.406577885Z [inf]  1:36:26 AM [express] GET /api/health 200 in 9ms
2025-11-21T01:36:36.420901772Z [inf]  1:36:36 AM [express] GET /api/static-content/home 404 in 29ms :: {"error":"Content not found"}
2025-11-21T01:36:36.420907662Z [inf]  1:36:36 AM [express] GET /api/settings 304 in 53ms :: {"maintenanceMode":0}
2025-11-21T01:36:36.420914843Z [inf]  1:36:36 AM [express] GET /api/gallery 500 in 53ms :: {"error":"Failed to fetch gallery images"}
2025-11-21T01:36:37.521000531Z [inf]  1:36:37 AM [express] GET /api/ingredients 304 in 32ms :: [{"id":"3a7bcfba-76e4-4d4a-9098-96885bedd0dâ€¦
2025-11-21T01:36:37.521007033Z [inf]  1:36:37 AM [express] GET /api/product-variants 200 in 35ms :: []
2025-11-21T01:36:37.521013167Z [inf]  1:36:37 AM [express] GET /api/menu-items 200 in 66ms :: [{"id":"018061f7-14ec-4ef1-a0a7-313429c272dcâ€¦
2025-11-21T01:36:37.521018155Z [inf]  1:36:37 AM [express] GET /api/categories 304 in 185ms :: [{"id":"98ad7c95-5940-4d69-8b10-13ab682ef30â€¦
2025-11-21T01:37:07.113069273Z [inf]  1:37:06 AM [express] GET /api/settings 304 in 17ms :: {"maintenanceMode":0}
2025-11-21T01:37:36.616923016Z [inf]  1:37:36 AM [express] GET /api/settings 304 in 50ms :: {"maintenanceMode":0}
2025-11-21T01:37:56.604774450Z [err]    line: '1449',
2025-11-21T01:37:56.604794112Z [err]    routine: 'parserOpenTable'
2025-11-21T01:37:56.604797628Z [inf]  1:37:52 AM [express] POST /api/admin/login 200 in 175ms :: {"success":true,"user":{"id":"fb0eaa81-c6â€¦
2025-11-21T01:37:56.604807455Z [err]  }
2025-11-21T01:37:56.604812469Z [inf]  1:37:52 AM [express] GET /api/admin/me 304 in 16ms :: {"id":"fb0eaa81-c657-48bc-b636-964d313d4056","â€¦
2025-11-21T01:37:56.604819240Z [inf]  1:37:53 AM [express] GET /api/admin/snapshots 200 in 20ms :: [{"id":"b8b6fe10-c5e8-43bb-bc20-2a7324dâ€¦
2025-11-21T01:37:56.604838052Z [err]  Error creating snapshot: error: relation "snapshot_ingredients" does not exist
2025-11-21T01:37:56.604857601Z [err]      at /app/node_modules/pg-pool/index.js:45:11
2025-11-21T01:37:56.604863587Z [err]      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-21T01:37:56.604868857Z [err]      at async <anonymous> (/app/server/snapshot-routes.ts:78:9) {
2025-11-21T01:37:56.604873401Z [err]    length: 119,
2025-11-21T01:37:56.604878045Z [err]    severity: 'ERROR',
2025-11-21T01:37:56.604883056Z [err]    code: '42P01',
2025-11-21T01:37:56.604888875Z [err]    detail: undefined,
2025-11-21T01:37:56.604893420Z [err]    hint: undefined,
2025-11-21T01:37:56.604897748Z [err]    position: '13',
2025-11-21T01:37:56.604902200Z [err]    internalPosition: undefined,
2025-11-21T01:37:56.604906976Z [err]    internalQuery: undefined,
2025-11-21T01:37:56.604916186Z [err]    where: undefined,
2025-11-21T01:37:56.604920616Z [err]    schema: undefined,
2025-11-21T01:37:56.604925157Z [err]    table: undefined,
2025-11-21T01:37:56.604929306Z [err]    column: undefined,
2025-11-21T01:37:56.604934413Z [err]    dataType: undefined,
2025-11-21T01:37:56.604939843Z [err]    constraint: undefined,
2025-11-21T01:37:56.604944696Z [err]    file: 'parse_relation.c',
2025-11-21T01:37:56.606780492Z [inf]  1:37:56 AM [express] POST /api/admin/snapshots 400 in 98ms :: {"error":"relation \"snapshot_ingredieâ€¦
2025-11-21T01:38:56.195577577Z [inf]  1:38:48 AM [express] GET /api/gallery 500 in 54ms :: {"error":"Failed to fetch gallery images"}
2025-11-21T01:38:56.195598622Z [inf]  1:38:52 AM [express] GET /api/static-content/contact 304 in 35ms :: {"id":"4ab46f84-cc5d-4be1-8cb7-1â€¦
2025-11-21T01:38:56.195606978Z [inf]  1:38:53 AM [express] GET /api/static-content/about 304 in 15ms :: {"id":"909c8add-e8a6-448b-ac01-9a9â€¦
2025-11-21T01:38:56.195614058Z [inf]  1:38:55 AM [express] GET /api/reservations 304 in 22ms :: []
2025-11-21T01:40:56.720663741Z [inf]  1:40:51 AM [express] POST /api/admin/logout 200 in 38ms :: {"success":true}
2025-11-21T01:40:56.720676923Z [inf]  1:40:52 AM [express] GET /api/settings 304 in 10ms :: {"maintenanceMode":0}
2025-11-21T01:40:56.720683540Z [inf]  1:40:52 AM [express] GET /api/static-content/home 404 in 11ms :: {"error":"Content not found"}
2025-11-21T01:40:56.720688755Z [inf]  1:40:52 AM [express] GET /api/gallery 500 in 39ms :: {"error":"Failed to fetch gallery images"}
2025-11-21T01:40:56.720693437Z [inf]  1:40:53 AM [express] GET /api/menu-items 304 in 15ms :: [{"id":"018061f7-14ec-4ef1-a0a7-313429c272dcâ€¦
2025-11-21T01:40:56.720699750Z [inf]  1:40:53 AM [express] GET /api/ingredients 304 in 18ms :: [{"id":"3a7bcfba-76e4-4d4a-9098-96885bedd0dâ€¦
2025-11-21T01:40:56.720704852Z [inf]  1:40:53 AM [express] GET /api/categories 304 in 39ms :: [{"id":"98ad7c95-5940-4d69-8b10-13ab682ef305â€¦
2025-11-21T01:40:56.720709574Z [inf]  1:40:53 AM [express] GET /api/product-variants 304 in 37ms :: []